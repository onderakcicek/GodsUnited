<?xml version="1.0" encoding="utf-8"?>
<!--GameAnalytics plugin additions-->
<root xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- init section is always evaluated once per architecture -->
    <init>
        <log text="GameAnalitics init"/>
    </init>
    
    <!-- optional additions to proguard -->
    <proguardAdditions>
        <insert>
-keep class com.gameanalytics.sdk.** { *; }
-keep class android.net.** { *; }
-dontwarn android.net.**
-keepattributes Signature
-keepattributes *Annotation*
-keepattributes EnclosingMethod
-keepattributes InnerClasses
        </insert>
    </proguardAdditions>
    
    <buildGradleAdditions>
        <insert>
            android {
                packagingOptions {
                    exclude 'META-INF/DEPENDENCIES'
                    exclude 'META-INF/LICENSE'
                    exclude 'META-INF/LICENSE.txt'
                    exclude 'META-INF/NOTICE'
                    exclude 'META-INF/NOTICE.txt'
                }
                
                compileOptions {
                    sourceCompatibility JavaVersion.VERSION_1_8
                    targetCompatibility JavaVersion.VERSION_1_8
                }
            }

            configurations {
                all {
                    exclude group: 'com.google.android.gms', module: 'play-services-games-v2'
                }
            }

            repositories {
                maven { url 'https://maven.gameanalytics.com/release' }
                maven { url 'https://maven.google.com' }
                flatDir { dirs("libs") }
            }

            dependencies {
                implementation('com.gameanalytics.sdk:gameanalytics-android:6.5.1') {
                    exclude group: 'com.android.support'
                    exclude group: 'com.google.android.gms', module: 'play-services-games-v2'
                    transitive = true
                }
                implementation('com.google.android.gms:play-services-appset:16.0.1')
            }
        </insert>
    </buildGradleAdditions>
    
    <!-- optional updates applied to AndroidManifest.xml -->
    <androidManifestUpdates>
        <addPermission android:name="android.permission.INTERNET"/>
        <addPermission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <addPermission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    </androidManifestUpdates>
</root>